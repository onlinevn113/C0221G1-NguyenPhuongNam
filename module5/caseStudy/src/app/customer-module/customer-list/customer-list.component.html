<!--navbar-->
<div class="container-fluid d-flex position-relative border-0 row " >
  <div class="col-3 ">
    <a href="/home" class="img-fluid"><img class=" img-fluid mx-5"
                                           src="https://www.sambacouture.com/wp-content/uploads/2017/12/Sambacouture-logo-icon.png"
                                           height="117" width="87"/></a>
  </div>
</div>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a class="nav-link " href=""> <span class="bi bi-house-door"></span> &nbsp;Home</a> <br> <br>
  <a class="nav-link " href="/customer"><span class="bi bi-person"></span>Customer</a> <br>
</div>
<nav class="navbar navbar-expand-lg navbar-dark  container-fluid font-weight-bolder px-0 text-white" id="navbar"
     style=" height: 47px;background: #0F574B">
  <div class="collapse navbar-collapse col-4 " id="navbarsExample07">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active px-3">
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>
      </li>
      <li class="nav-item active px-5 pt-2">
        <button style="background: white; color: #0F574B" class="btn-block bi bi-plus-circle" data-toggle="modal"
                data-target="#myModal">
          Add new customer
        </button>
      </li>
    </ul>
  </div>
  <div class="form-inline my-2 col-6  ">


    <input type="text" style="height: 30px ;width: 200px" id="searchName" [(ngModel)]="nameSearch"
           placeholder="Search name">&nbsp;
    <input type="text" style="height: 30px ;width: 200px" id="searchEmail" [(ngModel)]="addressSearch"
           placeholder="Search address">
    <button style="background: #0F574B; color: white" class="btn-light bi bi-search" (click)="search()"></button>
  </div>
  <div class="col-4 ">
    <ul class="navbar-nav mr-auto">
    </ul>
  </div>
</nav>
<div class="d-flex">
  <input type="date" style="height: 30px ;width: 200px" [(ngModel)]="startDate">
  <input type="date" style="height: 30px ;width: 200px" [(ngModel)]="endDate">
  <button style="background: #0F574B; color: white"
          (click)="searchBirthDate()">Search birthdate
  </button>
  <select  [(ngModel)]="searchType">
    <option value=""  hidden >Select type</option>
    <option value=""  selected>None</option>
    <option *ngFor="let ct of customerTypes" [ngValue]="ct.name">{{ct.name}}</option>
  </select>
  <button style="background: #0F574B; color: white"
          (click)="searchByType()">Search type
  </button>
</div>

<table class="table mt-3 container-fluid" >
  <thead class="thead-light">
  <tr>
    <th>STT</th>
    <th>Code</th>
    <th>Name</th>
    <th>Birthday</th>
    <th>Gender</th>
    <th>Address</th>
    <th>Customer Type</th>
    <!--    <th>Edit</th>-->
    <th>Views</th>
    <!--    <th>Delete with modal</th>-->
    <th>Delete</th>
    <!--    <th>View</th>-->
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let c of customers | paginate:{itemsPerPage: 10, currentPage:page }; index as i ">
    <td>{{i + page * 10 - 9 }}</td>
    <td>{{c.code}}</td>
    <td>{{c.name}}</td>
    <td>{{c.birthday | date:'dd/MM/yyyy'}}</td>

    <!--    <div *ngIf="c.gender == 1; then male; else female"></div>-->
    <!--    <ng-template #male>-->
    <!--      <td>Male</td>-->
    <!--    </ng-template>-->
    <!--    <ng-template #female>-->
    <!--      <td>Female</td>-->
    <!--    </ng-template>-->
    <td>{{c.gender == 1 ? 'Male' : 'Female'}}</td>
    <!--    <td>{{c.idCard}}</td>-->
    <!--    <td>{{c.phone}}</td>-->
    <!--    <td>{{c.email}}</td>-->
    <td>{{c.address}}</td>
    <td>{{c.customerType.name}}</td>
    <!--    <td>-->
    <!--      <button [routerLink]="['/customer/edit', c.id]" class="btn-dark bi bi-pencil-square"></button>-->
    <!--    </td>-->
    <td>
      <button class="btn-dark bi bi-eyedropper"
              (click)="sendIdEdit(c.id)">
      </button>

    </td>
    <!--    <td>-->
    <!--      <button type="button" class="btn btn-danger " data-toggle="modal" data-target="#exampleModal"-->
    <!--              (click)="sendIdDelete(c.id)">-->
    <!--        Delete-->
    <!--      </button>-->
    <!--    </td>-->
    <td>
      <button type="button " class="btn-dark bi bi-trash2-fill "
              (click)="deleteCustomer2(c.id, c.name)">
      </button>
    </td>
    <!--    <td>-->
    <!--      <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal"-->
    <!--              (click)="sendIdView(c.id)">-->
    <!--        Views-->
    <!--      </button>-->
    <!--    </td>-->
  </tr>
  </tbody>
</table>
<!--show modal edit-->
<button hidden id="showEditModal" data-toggle="modal" data-target="#myModal2">
</button>
<!--paging-->
<pagination-controls (pageChange)="page=$event" nextLabel="" previousLabel=""></pagination-controls>
<!-- Modal Delete -->
<!--<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
<!--  <div class="modal-dialog">-->
<!--    <div class="modal-content">-->
<!--      <div class="modal-header">-->
<!--        <h5 class="modal-title" id="exampleModalLabel">Delete</h5>-->
<!--        <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--          <span aria-hidden="true">&times;</span>-->
<!--        </button>-->
<!--      </div>-->
<!--      <div class="modal-body">-->
<!--        Do you want to delete <span>{{nameDelete}}</span>-->
<!--      </div>-->
<!--      <div class="modal-footer">-->
<!--        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
<!--        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="deleteCustomer()">Delete</button>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
<!--foooter-->
<footer class="text-white mb-3">
  <div class="container px-4 pb-3 text-center">
    <section class="mb-3">
      <span style="color: rgba(0,0,0,0.48)">Â© For more information </span>
      <a target="_blank" class="m-1 rounded-circle"
         href="https://www.facebook.com/furamaresort/"
         role="button">
        <img src="http://simpleicon.com/wp-content/uploads/facebook-2.png"
             class="img-fluid rounded-circle" style="height: 30px; width: 30px" alt="">
      </a>
      <a class="m-1 rounded-circle"
         href="https://www.instagram.com/furama_resort_danang/?hl=vi"
         role="button">
        <img src="https://cdn4.iconfinder.com/data/icons/picons-social/57/38-instagram-3-512.png"
             class="img-fluid rounded-circle" style="height: 30px; width: 30px" alt="">
      </a>
    </section>
  </div>
  <div class="text-center px-2 justify-content-center align-items-center " style=" background: #0F574B"
       id="footer-sticky">
    <span>COVID 19 UPDATE: The safety and well-being are our utmost priority</span>
    <a href="https://furamavietnam.com/covid-19-update/">
      <button class="my-1 mb-1" style="background: #c1f8f0; border-radius: 5px; height: 25px">
        <span style="color: #0F574B">Learn more</span>
      </button>
    </a>
  </div>
</footer>
<!--modal create-->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form [formGroup]="createForm" (ngSubmit)="saveCustomer()">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title " style="padding-left: 155px" id="myModalLabel">Create customer</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" (click)="clearFormCreate()">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <fieldset>
            <!-- Form Name -->
            <div class="group">
              <div class="forError" *ngIf="createForm.get('code').dirty">Code</div>
              <input type="text" class="form-control" formControlName="code">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('code').dirty">Code</label>
              <div class="text-danger" *ngFor="let v of validMsg.customer_code" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('code',v)">{{v.msg}}</small>
              </div>
            </div>
            <div class="group">
              <div class="forError" *ngIf="createForm.get('customerType').dirty">Customer type</div>
              <select formControlName="customerType" class="form-control">
                <option *ngFor="let ct of customerTypes" [ngValue]="ct">{{ct.name}}</option>
              </select>
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('customerType').dirty">Customer type</label>
              <div class="text-danger" *ngFor="let valid of validMsg.customerType">
                <div *ngIf="getValidateCreate('customerType', valid)">{{valid.msg}}</div>
              </div>
            </div>

            <div class="group">
              <div class="forError" *ngIf="createForm.get('gender').dirty">Gender</div>
              <select formControlName="gender" class="form-control">
                <option value="0">Female</option>
                <option value="1">Male</option>
              </select>
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('gender').dirty">Gender</label>
              <div class="text-danger" *ngFor="let valid of validMsg.gender">
                <div *ngIf="getValidateCreate('gender', valid)">{{valid.msg}}</div>
              </div>
            </div>

            <div class="group">
              <div class="forError" *ngIf="createForm.get('name').dirty">Name</div>
              <input type="text" class="form-control" formControlName="name">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('name').dirty">Name</label>
              <div class="text-danger" *ngFor="let v of validMsg.name" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('name',v)">{{v.msg}}</small>
              </div>
            </div>


            <div class="group">
              <div class="forError" *ngIf="createForm.get('birthday').touched ">Birthday</div>
              <input type="date" class="form-control" formControlName="birthday" placeholder="">
              <span class="highlight"></span>
              <span class="bar"></span>
              <div class="text-danger" *ngFor="let v of validMsg.birthday" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('birthday',v)">{{v.msg}}</small>
              </div>
            </div>


            <div class="group">
              <div class="forError" *ngIf="createForm.get('idCard').dirty">Id Card</div>
              <input type="number" class="form-control" formControlName="idCard">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('idCard').dirty">Id Card</label>
              <div class="text-danger" *ngFor="let v of validMsg.idCard" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('idCard',v)">{{v.msg}}</small>
              </div>
            </div>


            <div class="group">
              <div class="forError" *ngIf="createForm.get('phone').dirty">Phone number</div>
              <input type="number" class="form-control" formControlName="phone">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('phone').dirty">Phone number</label>
              <div class="text-danger" *ngFor="let v of validMsg.phonee" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('phone',v)">{{v.msg}}</small>
              </div>
            </div>


            <div class="group">
              <div class="forError" *ngIf="createForm.get('email').dirty">Email</div>
              <input type="email" class="form-control" formControlName="email">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('email').dirty">Email</label>
              <div class="text-danger" *ngFor="let v of validMsg.email" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('email',v)">{{v.msg}}</small>
              </div>
            </div>

            <div class="group">
              <div class="forError" *ngIf="createForm.get('address').dirty">Address</div>
              <input type="text" class="form-control" formControlName="address">
              <span class="highlight"></span>
              <span class="bar"></span>
              <label *ngIf="!createForm.get('address').dirty">Address</label>
              <div class="text-danger" *ngFor="let v of validMsg.addresss" style="margin-top: 2px">
                <small *ngIf="getValidateCreate('address',v)">{{v.msg}}</small>
              </div>
            </div>

          </fieldset>
        </div>
        <div class="modal-footer">
          <!--          <input type="button" class="btn btn-secondary" data-dismiss="modal" value="Cancel">-->
          <input type="submit" style="width: 100%; background: #0F574B" class=" btn btn-dark"
                 [disabled]="!createForm.valid"
                 value="Create">
        </div>
      </div>
    </form>
  </div>
</div>
<!--modal edit-->
<div class="modal fade" id="myModal2" tabindex="-1" aria-labelledby="myModalLabel2" aria-hidden="true">
  <div class="modal-dialog">
    <form *ngIf="editForm" [formGroup]="editForm" (ngSubmit)="editCustomer()">
      <div class="modal-content">
        <div class="modal-header">
          <input type="button" (click)="changeViewEdit()" [value]="isEdit?'View':'Edit'">
          <h5 class="modal-title " style="padding-left: 155px" id="myModalLabel2">Information</h5>
          <button type="button" id="editOut" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <fieldset>
            <!-- Form Name -->
            <div class="group">
              <div class="forError">Code</div>
              <input type="text" class="form-control" formControlName="code" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.customer_code" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('code',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>
            <div class="group">
              <div class="forError">Customer Type</div>
              <select formControlName="customerType" [compareWith]="compareFn" class="form-control"
                      [attr.disabled]="!isEdit?'':null">
                <ng-container *ngFor="let c of customerTypes">
                  <option [ngValue]="c">{{c.name}}</option>
                </ng-container>
              </select>
              <span class="highlight"></span>
              <span class="bar"></span>
              <div class="text-danger" *ngFor="let valid of validMsg.customerType">
                <div *ngIf="getValidateEdit('customerType', valid)">{{valid.msg}}</div>
              </div>
            </div>

            <div class="group">
              <div class="forError">Gender</div>
              <select formControlName="gender" class="form-control" [attr.disabled]="!isEdit?'':null">
                <option value="0">Female</option>
                <option value="1">Male</option>
              </select>
              <span class="highlight"></span>
              <span class="bar"></span>
              <div class="text-danger" *ngFor="let valid of validMsg.gender">
                <div *ngIf="getValidateEdit('gender', valid)">{{valid.msg}}</div>
              </div>
            </div>


            <div class="group">
              <div class="forError">Name</div>
              <input type="text" class="form-control" formControlName="name" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.name" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('name',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>

            <div class="group">
              <div class="forError">Birthday</div>
              <input type="date" class="form-control" formControlName="birthday" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.birthday" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('birthday',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>

            <div class="group">
              <div class="forError">Id Card</div>
              <input type="number" class="form-control" formControlName="idCard" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.idCard" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('idCard',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>


            <div class="group">
              <div class="forError">Phone</div>
              <input type="number" class="form-control" formControlName="phone" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.phonee" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('phone',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>

            <div class="group">
              <div class="forError">Email</div>
              <input type="text" class="form-control" formControlName="email" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.email" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('email',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>

            <div class="group">
              <div class="forError">Address</div>
              <input type="text" class="form-control" formControlName="address" [readOnly]="!isEdit">
              <span class="highlight"></span>
              <span class="bar"></span>
              <ng-container *ngIf="editForm">
                <div class="text-danger" *ngFor="let v of validMsg.addresss" style="margin-top: 2px">
                  <small *ngIf="getValidateEdit('address',v)">{{v.msg}}</small>
                </div>
              </ng-container>
            </div>
          </fieldset>
          <div class="modal-footer">
            <!--          <input type="button" class="btn btn-secondary" data-dismiss="modal" value="Cancel">-->
            <input type="submit" style="width: 50%; background: #0F574B" class=" btn btn-danger" value="Confirm"
                   [disabled]="!editForm.valid" [hidden]="!isEdit">
          </div>
        </div>
      </div>
    </form>

  </div>

</div>

